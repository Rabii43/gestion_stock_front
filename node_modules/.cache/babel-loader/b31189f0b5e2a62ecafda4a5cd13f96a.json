{"remainingRequest":"/home/terres-rabii/Documents/travail/OacaFront/node_modules/babel-loader/lib/index.js!/home/terres-rabii/Documents/travail/OacaFront/src/state/modules/auth.js","dependencies":[{"path":"/home/terres-rabii/Documents/travail/OacaFront/src/state/modules/auth.js","mtime":1652295323215},{"path":"/home/terres-rabii/Documents/travail/OacaFront/node_modules/cache-loader/dist/cjs.js","mtime":1647982849025},{"path":"/home/terres-rabii/Documents/travail/OacaFront/node_modules/babel-loader/lib/index.js","mtime":1648047804470}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgcmVnaXN0ZXJVcmwgfSBmcm9tICIuLi8uLi8uLi9hcGkvZW50cnlQb2ludCI7CmV4cG9ydCB2YXIgc3RhdGUgPSB7CiAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgOiBudWxsLAogIHJlZnJlc2hUb2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlZnJlc2hUb2tlbicpID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JlZnJlc2hUb2tlbicpIDogbnVsbCwKICBpc0F1dGg6IGZhbHNlLAogIHVzZXJJZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpIDogbnVsbCwKICByb2xlczogW10KfTsKZXhwb3J0IHZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIG5ld1ZhbHVlKSB7CiAgICBzdGF0ZS50b2tlbiA9IG5ld1ZhbHVlOwogICAgc2F2ZVN0YXRlKCd0b2tlbicsIG5ld1ZhbHVlKTsKICB9LAogIFNFVF9UT0tFTl9SRUZSRVNIOiBmdW5jdGlvbiBTRVRfVE9LRU5fUkVGUkVTSChzdGF0ZSwgbmV3VmFsdWUpIHsKICAgIHN0YXRlLnJlZnJlc2hUb2tlbiA9IG5ld1ZhbHVlOwogICAgc2F2ZVN0YXRlKCdyZWZyZXNoVG9rZW4nLCBuZXdWYWx1ZSk7CiAgfSwKICBTRVRfSVNfQVVUSDogZnVuY3Rpb24gU0VUX0lTX0FVVEgoc3RhdGUsIG5ld1ZhbHVlKSB7CiAgICBzdGF0ZS5pc0F1dGggPSBuZXdWYWx1ZTsKICB9LAogIFNFVF9VU0VSX0lEOiBmdW5jdGlvbiBTRVRfVVNFUl9JRChzdGF0ZSwgbmV3VmFsdWUpIHsKICAgIHN0YXRlLnVzZXJJZCA9IG5ld1ZhbHVlOwogICAgc2F2ZVN0YXRlKCd1c2VySWQnLCBuZXdWYWx1ZSk7CiAgfQp9OwpleHBvcnQgdmFyIGdldHRlcnMgPSB7CiAgLy8gV2hldGhlciB0aGUgdXNlciBpcyBjdXJyZW50bHkgbG9nZ2VkIGluLgogIGxvZ2dlZEluOiBmdW5jdGlvbiBsb2dnZWRJbihzdGF0ZSkgewogICAgcmV0dXJuICEhc3RhdGUuaXNBdXRoOwogIH0KfTsKZXhwb3J0IHZhciBhY3Rpb25zID0gewogIC8vIExvZ3Mgb3V0IHRoZSBjdXJyZW50IHVzZXIuCiAgbG9nT3V0OiBmdW5jdGlvbiBsb2dPdXQoX3JlZikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInRva2VuIik7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlcklkIik7CiAgICBjb21taXQoJ1NFVF9JU19BVVRIJywgZmFsc2UpOwogIH0sCiAgLy8gcmVnaXN0ZXIgdXNlcgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcihfcmVmMiwgcGF5bG9hZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgYXhpb3MucG9zdChyZWdpc3RlclVybCwgewogICAgICB1c2VybmFtZTogcGF5bG9hZC5maXJzdG5hbWUgKyAiXyIgKyBwYXlsb2FkLmxhc3RuYW1lLAogICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsCiAgICAgIGZpcnN0TmFtZTogcGF5bG9hZC5maXJzdG5hbWUsCiAgICAgIGxhc3ROYW1lOiBwYXlsb2FkLmxhc3RuYW1lCiAgICB9LCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgIH0KICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgX3RoaXMucmVnaXN0ZXJTdWNjZXNzID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5pc1JlZ2lzdGVyRXJyb3IgPSB0cnVlOwogICAgICAgIF90aGlzLnJlZ0Vycm9yID0gcmVzLmRhdGEubWVzc2FnZTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIF90aGlzLmlzUmVnaXN0ZXJFcnJvciA9IHRydWU7CiAgICAgIF90aGlzLnJlZ0Vycm9yID0gZXJyb3IuZGF0YS5tZXNzYWdlOwogICAgfSk7CiAgfQp9OyAvLyA9PT0KLy8gUHJpdmF0ZSBoZWxwZXJzCi8vID09PQoKZnVuY3Rpb24gc2F2ZVN0YXRlKGtleSwgc3RhdGUpIHsKICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBzdGF0ZSk7Cn0="},{"version":3,"sources":["/home/terres-rabii/Documents/travail/OacaFront/src/state/modules/auth.js"],"names":["axios","registerUrl","state","token","localStorage","getItem","refreshToken","isAuth","userId","roles","mutations","SET_TOKEN","newValue","saveState","SET_TOKEN_REFRESH","SET_IS_AUTH","SET_USER_ID","getters","loggedIn","actions","logOut","commit","removeItem","register","payload","post","username","firstname","lastname","email","password","firstName","lastName","headers","then","res","data","code","registerSuccess","isRegisterError","regError","message","catch","error","key","window","setItem"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\nimport {registerUrl} from \"../../../api/entryPoint\";\n\nexport const state = {\n\n    token: localStorage.getItem('token') ? localStorage.getItem('token') : null,\n    refreshToken: localStorage.getItem('refreshToken') ? localStorage.getItem('refreshToken') : null,\n    isAuth: false,\n    userId: localStorage.getItem('userId') ? localStorage.getItem('userId') : null,\n    roles: []\n}\n\nexport const mutations = {\n    SET_TOKEN(state, newValue) {\n        state.token = newValue\n        saveState('token', newValue)\n    },\n    SET_TOKEN_REFRESH(state, newValue) {\n        state.refreshToken = newValue\n        saveState('refreshToken', newValue)\n    },\n    SET_IS_AUTH(state, newValue) {\n        state.isAuth = newValue\n    },\n    SET_USER_ID(state, newValue) {\n        state.userId = newValue\n        saveState('userId', newValue)\n    },\n\n}\n\nexport const getters = {\n    // Whether the user is currently logged in.\n    loggedIn(state) {\n        return !!state.isAuth\n    },\n}\n\nexport const actions = {\n\n    // Logs out the current user.\n    logOut({commit}) {\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"userId\");\n        commit('SET_IS_AUTH', false)\n    },\n    // register user\n    // eslint-disable-next-line no-unused-vars\n    register({commit}, payload) {\n        axios.post(registerUrl,\n            {\n                username: payload.firstname + \"_\" + payload.lastname,\n                email: payload.email,\n                password: payload.password,\n                firstName: payload.firstname,\n                lastName: payload.lastname,\n            },\n            {\n                headers: {\n                    \"Content-type\": \"application/json\",\n                },\n            }\n        ).then((res) => {\n            if (res.data.code === 200) {\n                this.registerSuccess = true;\n            } else {\n                this.isRegisterError = true;\n                this.regError = res.data.message;\n            }\n        })\n            .catch((error) => {\n                this.isRegisterError = true;\n                this.regError = error.data.message;\n            });\n    }\n}\n\n// ===\n// Private helpers\n// ===\n\nfunction saveState(key, state) {\n    window.localStorage.setItem(key, state);\n}\n\n"]}]}