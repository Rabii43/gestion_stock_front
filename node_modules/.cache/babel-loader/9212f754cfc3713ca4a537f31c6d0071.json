{"remainingRequest":"/home/terres-rabii/Documents/travail/OacaFront/node_modules/babel-loader/lib/index.js!/home/terres-rabii/Documents/travail/OacaFront/src/authUtils.js","dependencies":[{"path":"/home/terres-rabii/Documents/travail/OacaFront/src/authUtils.js","mtime":1652206760773},{"path":"/home/terres-rabii/Documents/travail/OacaFront/node_modules/cache-loader/dist/cjs.js","mtime":1647982849025},{"path":"/home/terres-rabii/Documents/travail/OacaFront/node_modules/babel-loader/lib/index.js","mtime":1648047804470}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvdGVycmVzLXJhYmlpL0RvY3VtZW50cy90cmF2YWlsL09hY2FGcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL3RlcnJlcy1yYWJpaS9Eb2N1bWVudHMvdHJhdmFpbC9PYWNhRnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvaG9tZS90ZXJyZXMtcmFiaWkvRG9jdW1lbnRzL3RyYXZhaWwvT2FjYUZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZS9hcHAnOyAvLyBBZGQgdGhlIEZpcmViYXNlIHByb2R1Y3RzIHRoYXQgeW91IHdhbnQgdG8gdXNlCgppbXBvcnQgImZpcmViYXNlL2F1dGgiOwppbXBvcnQgImZpcmViYXNlL2ZpcmVzdG9yZSI7Cgp2YXIgRmlyZWJhc2VBdXRoQmFja2VuZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRmlyZWJhc2VBdXRoQmFja2VuZChmaXJlYmFzZUNvbmZpZykgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlyZWJhc2VBdXRoQmFja2VuZCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWdpc3RlclVzZXIiLCBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmUKICAgICAgICAgIHZhciB1c2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOwogICAgICAgICAgcmVzb2x2ZSh1c2VyKTsKICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxvZ2luVXNlciIsIGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlCiAgICAgICAgICB2YXIgdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsKICAgICAgICAgIHJlc29sdmUodXNlcik7CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoX3RoaXMuX2hhbmRsZUVycm9yKGVycm9yKSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJmb3JnZXRQYXNzd29yZCIsIGZ1bmN0aW9uIChlbWFpbCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZpcmViYXNlLmF1dGgoKS5zZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsLCB7CiAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArICIvbG9naW4iCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KF90aGlzLl9oYW5kbGVFcnJvcihlcnJvcikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibG9nb3V0IiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KF90aGlzLl9oYW5kbGVFcnJvcihlcnJvcikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2V0TG9nZ2VlZEluVXNlciIsIGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImF1dGhVc2VyIiwgSlNPTi5zdHJpbmdpZnkodXNlcikpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJnZXRBdXRoZW50aWNhdGVkVXNlciIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhdXRoVXNlcicpKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFVzZXInKSk7CiAgICB9KTsKCiAgICBpZiAoZmlyZWJhc2VDb25maWcpIHsKICAgICAgLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZQogICAgICBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsKICAgICAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbiAodXNlcikgewogICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhdXRoVXNlciIsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnYXV0aFVzZXInKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KICAvKioNCiAgICogUmVnaXN0ZXJzIHRoZSB1c2VyIHdpdGggZ2l2ZW4gZGV0YWlscw0KICAgKi8KCgogIF9jcmVhdGVDbGFzcyhGaXJlYmFzZUF1dGhCYWNrZW5kLCBbewogICAga2V5OiAiX2hhbmRsZUVycm9yIiwKCiAgICAvKioNCiAgICAgKiBIYW5kbGUgdGhlIGVycm9yDQogICAgICogQHBhcmFtIHsqfSBlcnJvciANCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRXJyb3IoZXJyb3IpIHsKICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7CiAgICAgIHJldHVybiBlcnJvck1lc3NhZ2U7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRmlyZWJhc2VBdXRoQmFja2VuZDsKfSgpOwoKdmFyIF9maXJlQmFzZUJhY2tlbmQgPSBudWxsOwovKioNCiAqIEluaXRpbGl6ZSB0aGUgYmFja2VuZA0KICogQHBhcmFtIHsqfSBjb25maWcgDQogKi8KCnZhciBpbml0RmlyZWJhc2VCYWNrZW5kID0gZnVuY3Rpb24gaW5pdEZpcmViYXNlQmFja2VuZChjb25maWcpIHsKICBpZiAoIV9maXJlQmFzZUJhY2tlbmQpIHsKICAgIF9maXJlQmFzZUJhY2tlbmQgPSBuZXcgRmlyZWJhc2VBdXRoQmFja2VuZChjb25maWcpOwogIH0KCiAgcmV0dXJuIF9maXJlQmFzZUJhY2tlbmQ7Cn07Ci8qKg0KICogUmV0dXJucyB0aGUgZmlyZWJhc2UgYmFja2VuZA0KICovCgoKdmFyIGdldEZpcmViYXNlQmFja2VuZCA9IGZ1bmN0aW9uIGdldEZpcmViYXNlQmFja2VuZCgpIHsKICByZXR1cm4gX2ZpcmVCYXNlQmFja2VuZDsKfTsKCmV4cG9ydCB7IGluaXRGaXJlYmFzZUJhY2tlbmQsIGdldEZpcmViYXNlQmFja2VuZCB9Ow=="},{"version":3,"sources":["/home/terres-rabii/Documents/travail/OacaFront/src/authUtils.js"],"names":["firebase","FirebaseAuthBackend","firebaseConfig","email","password","Promise","resolve","reject","auth","createUserWithEmailAndPassword","then","user","currentUser","error","_handleError","signInWithEmailAndPassword","sendPasswordResetEmail","url","window","location","protocol","host","catch","signOut","sessionStorage","setItem","JSON","stringify","getItem","parse","initializeApp","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["import firebase from 'firebase/app';\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nclass FirebaseAuthBackend {\r\n    constructor(firebaseConfig) {\r\n        if (firebaseConfig) {\r\n            // Initialize Firebase\r\n            firebase.initializeApp(firebaseConfig);\r\n            firebase.auth().onAuthStateChanged((user) => {\r\n                if (user) {\r\n                    sessionStorage.setItem(\"authUser\", JSON.stringify(user));\r\n                } else {\r\n                    sessionStorage.removeItem('authUser');\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Registers the user with given details\r\n     */\r\n    registerUser = (email, password) => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().createUserWithEmailAndPassword(email, password).then((user) => {\r\n                // eslint-disable-next-line no-redeclare\r\n                var user = firebase.auth().currentUser;\r\n                resolve(user);\r\n            }, (error) => {\r\n                reject(this._handleError(error));\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Login user with given details\r\n     */\r\n    loginUser = (email, password) => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().signInWithEmailAndPassword(email, password).then((user) => {\r\n                // eslint-disable-next-line no-redeclare\r\n                var user = firebase.auth().currentUser;\r\n                resolve(user);\r\n            }, (error) => {\r\n                reject(this._handleError(error));\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * forget Password user with given details\r\n     */\r\n    forgetPassword = (email) => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().sendPasswordResetEmail(email, { url: window.location.protocol + \"//\" + window.location.host + \"/login\" }).then(() => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Logout the user\r\n     */\r\n    logout = () => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().signOut().then(() => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    }\r\n\r\n    setLoggeedInUser = (user) => {\r\n        sessionStorage.setItem(\"authUser\", JSON.stringify(user));\r\n    }\r\n\r\n    /**\r\n     * Returns the authenticated user\r\n     */\r\n    getAuthenticatedUser = () => {\r\n        if (!sessionStorage.getItem('authUser'))\r\n            return null;\r\n        return JSON.parse(sessionStorage.getItem('authUser'));\r\n    }\r\n\r\n    /**\r\n     * Handle the error\r\n     * @param {*} error \r\n     */\r\n    _handleError(error) {\r\n        var errorMessage = error.message;\r\n        return errorMessage;\r\n    }\r\n}\r\n\r\nlet _fireBaseBackend = null;\r\n\r\n/**\r\n * Initilize the backend\r\n * @param {*} config \r\n */\r\nconst initFirebaseBackend = (config) => {\r\n    if (!_fireBaseBackend) {\r\n        _fireBaseBackend = new FirebaseAuthBackend(config);\r\n    }\r\n    return _fireBaseBackend;\r\n}\r\n\r\n/**\r\n * Returns the firebase backend\r\n */\r\nconst getFirebaseBackend = () => {\r\n    return _fireBaseBackend;\r\n}\r\n\r\nexport { initFirebaseBackend, getFirebaseBackend };"]}]}