{"remainingRequest":"/home/terres-rabii/Documents/travail/scrum/gestion stock front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/terres-rabii/Documents/travail/scrum/gestion stock front/src/router/views/account/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/terres-rabii/Documents/travail/scrum/gestion stock front/src/router/views/account/login.vue","mtime":1652462863974},{"path":"/home/terres-rabii/Documents/travail/scrum/gestion stock front/node_modules/cache-loader/dist/cjs.js","mtime":1647982849025},{"path":"/home/terres-rabii/Documents/travail/scrum/gestion stock front/node_modules/babel-loader/lib/index.js","mtime":1648047804470},{"path":"/home/terres-rabii/Documents/travail/scrum/gestion stock front/node_modules/cache-loader/dist/cjs.js","mtime":1647982849025},{"path":"/home/terres-rabii/Documents/travail/scrum/gestion stock front/node_modules/vue-loader/lib/index.js","mtime":1648047806763}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBqd3RfZGVjb2RlIGZyb20gImp3dC1kZWNvZGUiOwppbXBvcnQgTGF5b3V0IGZyb20gIi4uLy4uL2xheW91dHMvYXV0aCI7CmltcG9ydCB7YXV0aE1ldGhvZHMsIG5vdGlmaWNhdGlvbk1ldGhvZHN9IGZyb20gIkAvc3RhdGUvaGVscGVycyI7CmltcG9ydCBhcHBDb25maWcgZnJvbSAiQC9hcHAuY29uZmlnIjsKaW1wb3J0IHtyZXF1aXJlZCwgZW1haWx9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7bG9naW59IGZyb20gIi4uLy4uLy4uLy4uL2FwaS9lbnRyeVBvaW50IjsKaW1wb3J0IERyYXdlciBmcm9tICJ2dWUtc2ltcGxlLWRyYXdlciI7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcicKCgpjb25zdCB7aXNOYXZpZ2F0aW9uRmFpbHVyZSwgTmF2aWdhdGlvbkZhaWx1cmVUeXBlfSA9IFZ1ZVJvdXRlcgoKCi8qKgogKiBMb2dpbiBjb21wb25lbnQKICovCmV4cG9ydCBkZWZhdWx0IHsKICBwYWdlOiB7CiAgICB0aXRsZTogIkxvZ2luIiwKICAgIG5hbWU6ICJsb2dpbiIsCiAgICBtZXRhOiBbCiAgICAgIHsKICAgICAgICBuYW1lOiAiZGVzY3JpcHRpb24iLAogICAgICAgIGNvbnRlbnQ6IGFwcENvbmZpZy5kZXNjcmlwdGlvbiwKICAgICAgfSwKICAgIF0sCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMYXlvdXQsCiAgICBEcmF3ZXIsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW1haWw6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIHJlbWVtYmVyTWU6IGZhbHNlLAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICBhdXRoRXJyb3I6IG51bGwsCiAgICAgIG1hc2s6IHsKICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkOycsCiAgICAgICAgYmFja2dyb3VuZDogJyNmZmZmZmYgIWltcG9ydGFudDsnLAogICAgICAgIG9wYWNpdHk6ICcwICFpbXBvcnRhbnQ7JywKICAgICAgICB3aWR0aDogJzEwMCU7JywKICAgICAgICBoZWlnaHQ6ICd1bnNldCAhaW1wb3J0YW50OycKICAgICAgfSwKICAgICAgdHJ5aW5nVG9Mb2dJbjogZmFsc2UsCiAgICAgIGlzQXV0aEVycm9yOiBmYWxzZSwKICAgICAgaXNEb3duRHJhd2VyOiB0cnVlLAogICAgICBjbG9zZVA6IGZhbHNlLAogICAgfTsKICB9LAogIHZhbGlkYXRpb25zOiB7CiAgICBlbWFpbDogewogICAgICByZXF1aXJlZCwKICAgICAgZW1haWwsCiAgICB9LAogICAgcGFzc3dvcmQ6IHsKICAgICAgcmVxdWlyZWQsCiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG5vdGlmaWNhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlID8gdGhpcy4kc3RvcmUuc3RhdGUubm90aWZpY2F0aW9uIDogbnVsbDsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5hdXRoTWV0aG9kcywKICAgIC4uLm5vdGlmaWNhdGlvbk1ldGhvZHMsCiAgICAvLyBUcnkgdG8gbG9nIHRoZSB1c2VyIGluIHdpdGggdGhlIGVtYWlsCiAgICAvLyBhbmQgcGFzc3dvcmQgdGhleSBwcm92aWRlZC4KICAgIGFzeW5jIHRyeVRvTG9nSW4oKSB7CiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTsKICAgICAgLy8gc3RvcCBoZXJlIGlmIGZvcm0gaXMgaW52YWxpZAogICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICBpZiAodGhpcy4kdi4kaW52YWxpZCkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBTaW1wbGUgTG9naW4KICAgICAgICBheGlvcy5wb3N0KGxvZ2luLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAiQWNjZXB0IjogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgIkNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9CiAgICAgICAgKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGxldCB0b2tlbiA9IHJlcy5kYXRhLnRva2VuOwogICAgICAgICAgbGV0IHJlZnJlc2ggPSByZXMuZGF0YS5yZWZyZXNoX3Rva2VuOwogICAgICAgICAgdmFyIGRlY29kZWQgPSBqd3RfZGVjb2RlKHRva2VuKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJyb2xlcyIsIEpTT04uc3RyaW5naWZ5KGRlY29kZWQucm9sZXMpKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiYXV0aC9TRVRfVE9LRU4iLCB0b2tlbik7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImF1dGgvU0VUX1RPS0VOX1JFRlJFU0giLCByZWZyZXNoKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiYXV0aC9TRVRfVVNFUl9JRCIsIGRlY29kZWQuaWQpOwogICAgICAgICAgLy8gSWYgdXNlciBlbmFibGVkCiAgICAgICAgICBpZiAoZGVjb2RlZC5pc0FjdGl2ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLmlzQXV0aCA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdXNlcnMnKQogICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmICghaXNOYXZpZ2F0aW9uRmFpbHVyZShlLCBOYXZpZ2F0aW9uRmFpbHVyZVR5cGUucmVkaXJlY3RlZCkpIHsKICAgICAgICAgICAgICAgICAgICBQcm9taXNlLnJlamVjdChlKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgdGhpcy5pc0F1dGhFcnJvciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuYXV0aEVycm9yID0gIlZvdHJlIGNvbXB0ZSBuJ2VzdCBwYXMgZW5jb3JlIGFjdGl2w6khIjsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuaXNBdXRoRXJyb3IgPSB0cnVlOwogICAgICAgICAgdGhpcy5hdXRoRXJyb3IgPSAiw4ljaGVjIGRlIGxhIGNvbm5leGlvbiI7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/router/views/account","sourcesContent":["<template>\n  <Layout>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-8 col-lg-6 col-xl-5\">\n        <div class=\"card overflow-hidden\">\n          <div class=\"bg-card-header\">\n            <div class=\"row\">\n              <div class=\"col-7\">\n                <div class=\"text-primary p-4\">\n                  <h5 class=\"text-primary\">Bienvenue !</h5>\n                  <p>Connectez-vous à Mystock</p>\n                </div>\n              </div>\n              <div class=\"col-5 align-self-end\">\n                <img\n                    src=\"@/assets/images/profile-img.png\"\n                    alt\n                    class=\"img-fluid\"\n                />\n              </div>\n            </div>\n          </div>\n          <div class=\"card-body pt-0\">\n            <div>\n              <router-link tag=\"a\" to=\"/\">\n                <div class=\"avatar-md profile-user-wid mb-4\">\n                  <span class=\"avatar-title rounded-circle bg-white-circle\">\n                    <img src=\"@/assets/images/logo.svg\" alt height=\"50\"/>\n                  </span>\n                </div>\n              </router-link>\n            </div>\n            <b-alert\n                v-model=\"isAuthError\"\n                variant=\"danger\"\n                class=\"mt-3\"\n                dismissible\n            >{{ authError }}\n            </b-alert>\n            <div\n                v-if=\"notification.message\"\n                :class=\"'alert ' + notification.type\"\n            >\n              {{ notification.message }}\n            </div>\n            <b-form class=\"p-2\" @submit.prevent=\"tryToLogIn\">\n              <b-form-group\n                  class=\"mb-3\"\n                  id=\"input-group-1\"\n                  label=\"Email\"\n                  label-for=\"input-1\"\n              >\n                <b-form-input\n                    id=\"input-1\"\n                    v-model=\"email\"\n                    type=\"text\"\n                    placeholder=\"Entrer votre email\"\n                    :class=\"{ 'is-invalid': submitted && $v.email.$error }\"\n                ></b-form-input>\n                <div\n                    v-if=\"submitted && $v.email.$error\"\n                    class=\"invalid-feedback\"\n                >\n                  <span v-if=\"!$v.email.required\">Email est requis.</span>\n                  <span v-if=\"!$v.email.email\"\n                  >Veuillez entrer une adresse email valide.</span>\n                </div>\n              </b-form-group>\n              <b-form-group\n                  class=\"mb-3\"\n                  id=\"input-group-2\"\n                  label=\"Mot de passe\"\n                  label-for=\"input-2\"\n              >\n                <b-form-input\n                    id=\"input-2\"\n                    v-model=\"password\"\n                    type=\"password\"\n                    placeholder=\"Entrer votre mot de passe\"\n                    :class=\"{ 'is-invalid': submitted && $v.password.$error }\"\n                ></b-form-input>\n                <div\n                    v-if=\"submitted && !$v.password.required\"\n                    class=\"invalid-feedback\"\n                >\n                  Mot de passe est requis.\n                </div>\n              </b-form-group>\n              <b-form-checkbox\n                  class=\"form-check\"\n                  id=\"customControlInline\"\n                  name=\"checkbox-1\"\n                  v-model=\"rememberMe\"\n              >\n                Se souvenir de moi\n              </b-form-checkbox>\n              <div class=\"mt-3 d-grid\">\n                <b-button type=\"submit\" variant=\"magenta\" class=\"btn-block\"\n                >Connexion\n                </b-button>\n              </div>\n              <div class=\"mt-4 text-center\">\n                <router-link tag=\"a\" to=\"/reset/password\" class=\"text-muted\">\n                  <i class=\"mdi mdi-lock me-1\"></i> Mot de passe oublié?\n                </router-link>\n              </div>\n            </b-form>\n          </div>\n          <!-- end card-body -->\n        </div>\n        <!-- end card -->\n        <div class=\"mt-5 px-4 text-center\">\n          <p>\n            Cette platforme est privé. Veuillez renseigner votre login et votre\n            mot de passe.\n          </p>\n          <p>\n            Pour demander la création d'un compte, veuillez\n            <router-link tag=\"a\" to=\"/register\" class=\"fw-medium text-primary\"\n            ><u>cliquez ici</u></router-link>\n          </p>\n        </div>\n      </div>\n      <!-- end col -->\n    </div>\n    <!-- end row -->\n  </Layout>\n</template>\n\n<script>\nimport jwt_decode from \"jwt-decode\";\nimport Layout from \"../../layouts/auth\";\nimport {authMethods, notificationMethods} from \"@/state/helpers\";\nimport appConfig from \"@/app.config\";\nimport {required, email} from \"vuelidate/lib/validators\";\nimport axios from \"axios\";\nimport {login} from \"../../../../api/entryPoint\";\nimport Drawer from \"vue-simple-drawer\";\nimport VueRouter from 'vue-router'\n\n\nconst {isNavigationFailure, NavigationFailureType} = VueRouter\n\n\n/**\n * Login component\n */\nexport default {\n  page: {\n    title: \"Login\",\n    name: \"login\",\n    meta: [\n      {\n        name: \"description\",\n        content: appConfig.description,\n      },\n    ],\n  },\n  components: {\n    Layout,\n    Drawer,\n  },\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      rememberMe: false,\n      submitted: false,\n      authError: null,\n      mask: {\n        position: 'fixed;',\n        background: '#ffffff !important;',\n        opacity: '0 !important;',\n        width: '100%;',\n        height: 'unset !important;'\n      },\n      tryingToLogIn: false,\n      isAuthError: false,\n      isDownDrawer: true,\n      closeP: false,\n    };\n  },\n  validations: {\n    email: {\n      required,\n      email,\n    },\n    password: {\n      required,\n    },\n  },\n  computed: {\n    notification() {\n      return this.$store ? this.$store.state.notification : null;\n    },\n  },\n  methods: {\n    ...authMethods,\n    ...notificationMethods,\n    // Try to log the user in with the email\n    // and password they provided.\n    async tryToLogIn() {\n      this.submitted = true;\n      // stop here if form is invalid\n      this.$v.$touch();\n      if (this.$v.$invalid) {\n        return;\n      } else {\n        // Simple Login\n        axios.post(login,\n            {\n              email: this.email,\n              password: this.password,\n            },\n            {\n              headers: {\n                \"Accept\": 'application/json',\n                \"Content-type\": \"application/json\",\n              },\n            }\n        ).then((res) => {\n          let token = res.data.token;\n          let refresh = res.data.refresh_token;\n          var decoded = jwt_decode(token);\n          localStorage.setItem(\"roles\", JSON.stringify(decoded.roles));\n          this.$store.commit(\"auth/SET_TOKEN\", token);\n          this.$store.commit(\"auth/SET_TOKEN_REFRESH\", refresh);\n          this.$store.commit(\"auth/SET_USER_ID\", decoded.id);\n          // If user enabled\n          if (decoded.isActive === true) {\n            this.$store.state.auth.isAuth = true;\n            this.$router.push('/users')\n                .catch((e) => {\n                  if (!isNavigationFailure(e, NavigationFailureType.redirected)) {\n                    Promise.reject(e)\n                  }\n                })\n          } else {\n            //\n            this.isAuthError = true;\n            this.authError = \"Votre compte n'est pas encore activé!\";\n          }\n        }).catch((error) => {\n          this.isAuthError = true;\n          this.authError = \"Échec de la connexion\";\n        });\n      }\n    },\n  },\n};\n</script>\n\n\n<style lang=\"scss\" scoped>\na-text {\n  margin-left: 36% !important;\n  font-family: 'Poppins';\n  font-style: normal !important;\n  font-weight: 500 !important;\n  font-size: 13px !important;\n  line-height: 20px !important;\n  display: flex !important;\n  align-content: center;\n  text-transform: capitalize !important;\n  color: #495057 !important;\n}\n\na-text:hover {\n  color: #5C92C2;\n}\n\n::v-deep .vue-simple-drawer.closeable.down {\n  padding: 40px 10% !important;\n  color: #000000 !important;\n  background: #FFFFFF !important;\n  box-shadow: 0 10px 20px rgba(18, 38, 63, 0.031) !important;\n  height: 20%;\n}\n\n::v-deep .vue-simple-drawer .close-btn {\n  margin: 20px 30px !important;\n}\n\n.color-title {\n  color: #036183 !important;\n}\n\n.sub-title {\n  font-family: 'Poppins';\n  font-style: normal;\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 21px;\n  color: #495057;\n}\n\n.color {\n  font-family: 'Poppins';\n  font-style: normal;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 21px;\n  color: #5C92C2;\n}\n\n.btn-style {\n  border-radius: 3px;\n  font-family: 'Poppins';\n  font-style: normal;\n  font-weight: 400;\n  font-size: 13px;\n  line-height: 20px;\n  color: #FFFFFF;\n}\n</style>\n"]}]}